#/bin/bash
set -e
platform=$(uname -o)
EXT=
ASM=
if [ "$platform" == "Darwin" ]; then
    EXT=".macos"
    ASM=-A../../include/sjasmplus.macos
fi

specialist/convert_png_to_specialist/convert_png_to_specialist${EXT} specialist

../../c8080$EXT $ASM -ORKS -DARCH_SPECIALIST -Ispecialist -olines.specialist.rks \
 lines.c \
 music.c \
 path.c \
 specialist/resources.c

E=/home/alemorf/a/work/retro_computers/Specialist/my_emulator.html/file_lines.js
if [ -e $E ]
then
    echo "loadFile([" >$E
    xxd -i lines.specialist.rks | grep , >>$E
    echo "]);" >>$E
    echo Make $E
fi
